<div class="memory full">
  <header>
    <a href="#" class="userAvatar"><%= image_tag "avatar.png" %></a>
    <h1 class="title"><%= @memory.title %></h1>
    <p class="sub"><%= sub_text(@memory) %></p>
  </header>
  <div class="clearfix">
    <div class="photo col-sm-8">
      <img src="<%= cache_busted_url(@memory) %>" alt="<%= @memory.title %>" title="<%= @memory.title %>" />

      <p><%= @memory.description %></p>
      <p><%= @memory.attribution %></p>
    </div>

    <div class="col-sm-4">

      <div class="memory-meta">

        <p class="views">This has been viewed <strong>XX</strong> times</p>
        <% scrapbook_count = @memory.scrapbooks.count %>
        <p class="saved">This has been added to <strong><%= scrapbook_count %></strong> <%= 'scrapbook'.pluralize(scrapbook_count) %></p>

        <span class="buttons">
          <% if logged_in? %>
            <%= link_to "Add to scrapbook +", '#', class: "btn btn-default", data: {toggle: 'modal', target: '#add-to-scrapbook-modal'} %>
          <% else %>
            <br />
            <div>
              <p>If you would like to add this to a Scrapbook, please</p>
              <%= link_to 'Sign Up', signup_path, class: 'btn btn-primary' %>
              or
              <%= link_to 'Sign In', signin_path, class: 'btn btn-primary' %>
            </div>
            <br />
          <% end %>
          <%= link_to "Share this photo", '#', class: "btn btn-default not-implemented" %>
          <% if belongs_to_user?(@memory) %>
            <%= link_to "Edit this memory", edit_my_memory_path(@memory.id), :class => "btn btn-default" %>
            <%= link_to "Delete this memory",  my_memory_path(@memory.id), method: :delete, data: {confirm: 'Are you sure?'}, :class => "btn btn-danger"%>
          <% end %>
        </span>


        <h3>Categories</h3>
        <p><%= @memory.category_list %></p>

        <h3>Tags</h3>

        <ul>
          <% @memory.tags.each do |tag| %>
            <li><%= tag.name %></li>
          <% end %>
        </ul>
      </div>
    </div>
  </div>
</div>

<%= render partial: 'memories/add_to_scrapbook', locals: {memory: @memory} %>
